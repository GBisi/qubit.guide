\documentclass[fleqn]{article}

% START PREAMBLE %


% Standard packages
\usepackage{amsmath,amssymb}
\usepackage{amsfonts,amsthm,bm}
\usepackage{enumitem}
\usepackage{lmodern,mathrsfs}
\usepackage{array,tabularx}
\usepackage{graphicx,wrapfig,caption}
\usepackage{setspace,multicol}
\usepackage{physics}
\usepackage{mathtools}
\usepackage{colortbl}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{float}


% TikZ
\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{pgfplots}
\pgfplotsset{compat=1.17}
\usepackage{latex/tikz-3dplot-circleofsphere}


% Bookdown
\usepackage{longtable}
\providecommand{\tightlist}{\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}


% Style

%% Fonts and colours
\usepackage[T1]{fontenc}
\usepackage{charter}
\usepackage{dsfont} % for \mathbb{1}
\definecolor{primary}{RGB}{177,98,78}
\definecolor{secondary}{RGB}{91,132,177}

%% Links and references
\usepackage{hyperref}
\hypersetup{colorlinks,linkcolor={secondary},urlcolor={primary}}
\usepackage[noabbrev,capitalise,nameinlink]{cleveref}
\crefformat{equation}{(#2#1#3)}

%% Page layout
\usepackage{sidenotes,marginnote}
% \renewcommand{\footnote}[1]{\sidenote{#1}}
\usepackage{tocloft}
\advance\cftsecnumwidth 0.5em\relax
\advance\cftsubsecindent 0.5em\relax
\advance\cftsubsecnumwidth 0.5em\relax

%% Environments
\usepackage{etoolbox}
\AtBeginEnvironment{quote}{\itshape}
\usepackage[skins,breakable]{tcolorbox}
\newenvironment{idea}{}{}
\tcolorboxenvironment{idea}{
  boxrule=2pt,
  boxsep=3pt,
  colback={white},
  colframe={secondary},
  rounded corners,
  enhanced jigsaw,
  before skip=1.5em,
  after skip=1.5em,
}
\newenvironment{technical}[1]{\textbf{#1.}\par\vspace{.5\baselineskip}\everypar{\setlength{\parindent}{1.5em}}}{}
\tcolorboxenvironment{technical}{
  boxrule=2pt,
  boxsep=3pt,
  colback={white},
  colframe={primary},
  rounded corners,
  enhanced jigsaw,
  before skip=1.5em,
  after skip=1.5em,
  breakable,
}
\newtheorem*{scenario}{Scenario}
\tcolorboxenvironment{scenario}{
  boxrule=2pt,
  boxsep=3pt,
  colback={white},
  colframe={gray},
  rounded corners,
  enhanced jigsaw,
  before skip=1.5em,
  after skip=1.5em,
}
\newtheorem*{circuit}{Circuit}
\tcolorboxenvironment{circuit}{
  boxrule=2pt,
  boxsep=3pt,
  colback={white},
  colframe={gray},
  rounded corners,
  enhanced jigsaw,
  before skip=1.5em,
  after skip=1.5em,
}

%% Sections
\let\oldsection\section
\renewcommand\section{\clearpage\oldsection}
\let\oldpart\part
\renewcommand\part{\clearpage\oldpart}


% Shortcuts and commands
\renewcommand{\leq}{\leqslant}
\renewcommand{\geq}{\geqslant}

% END PREAMBLE %

\title{$title$}
\author{$author$}
\date{$date$}


\begin{document}

\maketitle

\setcounter{tocdepth}{2}
\tableofcontents

$body$

\end{document}